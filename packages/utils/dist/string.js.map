{"version":3,"sources":["/Users/lixianjie/project/openSource/m78/packages/utils/src/string.ts"],"sourcesContent":["import { AnyObject } from \"./types\";\n\n/**\n * 替换html字符中的标签为指定字符\n * @param str - html文本\n * @param val - '' | 替换后的值\n * @return - 替换标签后的文本\n * */\n\nexport function replaceHtmlTags(str = \"\", val = \"\") {\n  const reg = /(<\\/?.+?\\/?>|&nbsp;|&mdash;)/g;\n  return str.replace(reg, val);\n}\n\n/**\n *  生成一段随机字符\n *  @param number - 随机串的长度倍数，默认1倍，随机字符长度为10为\n *  @return string\n *  */\nexport function createRandString(number = 1): string {\n  return Array.from({ length: number }).reduce((prev) => {\n    return prev + Math.random().toString(36).slice(2);\n  }, \"\") as string;\n}\n\ninterface Byte2Text {\n  (byte: number, conf?: { precision: number }): string;\n\n  KB: number;\n  MB: number;\n  GB: number;\n  TB: number;\n}\n\nconst KB = 1024;\nconst MB = KB * 1024;\nconst GB = MB * 1024;\nconst TB = GB * 1024;\nconst byte2textDefaultConfig = {\n  precision: 1,\n};\n\n/**\n * 将字节转为适合人类阅读的字符串\n * @param byte - 待转换的字节\n * @param conf - 其他配置\n * @param conf.precision - 1 | 小数精度\n * @return - 用于展示的字符串\n * */\nexport const byte2text: Byte2Text = (byte, conf) => {\n  const cf = {\n    ...byte2textDefaultConfig,\n    ...conf,\n  };\n\n  let s = \"\";\n\n  if (byte >= TB) {\n    s = `${(byte / TB).toFixed(cf.precision)}T`;\n  } else if (byte >= GB) {\n    s = `${(byte / GB).toFixed(cf.precision)}G`;\n  } else if (byte >= MB) {\n    s = `${(byte / MB).toFixed(cf.precision)}M`;\n  } else {\n    s = `${(byte / KB).toFixed(cf.precision)}K`;\n  }\n\n  return s;\n};\n\nbyte2text.KB = KB;\nbyte2text.MB = MB;\nbyte2text.GB = GB;\nbyte2text.TB = TB;\n\nconst heightLightMatchStringDefaultConf = {\n  color: \"#F83D48\",\n};\n\n/**\n * 以指定的模式通过转html文本高亮字符中的所有被匹配字符\n * @param str - 目标字符串\n * @param regExp - 可以被new RegExp()接收的正则字符串或正则表达式\n * @param conf - 其他配置\n * @param conf.color - '#F83D48' | 高亮颜色\n * @return - 附加了html高亮标签的字符串\n * @example\n console.log(heightLightMatchString('你好吗，我很好。', '好'));\n console.log(heightLightMatchString('你好吗，我很好。', /好/));\n\n // 以上使用均输出:\n // => 你<span style=\"color: #F83D48\">好</span>吗，我很<span style=\"color: #F83D48\">好</span>。\n * */\nexport function heightLightMatchString(\n  str: string,\n  regExp: string | RegExp,\n  conf?: { color?: string }\n) {\n  if (!str || !regExp) return str || \"\";\n  const cf = {\n    ...heightLightMatchStringDefaultConf,\n    ...conf,\n  };\n\n  const reg = new RegExp(regExp, \"g\");\n\n  return str.replace(reg, (s) => {\n    return `<span style=\"color: ${cf.color}\">${s}</span>`;\n  });\n}\n\n/** get string first part. like YYYY-MM-DD hh:mm:ss to YYYY-MM-DD */\nexport function getStringFirst(string = \"\", separator = \" \") {\n  if (!string) return \"\";\n  return string.split(separator)[0];\n}\n\n/** get string last part. like YYYY-MM-DD hh:mm:ss to hh:mm:ss */\nexport function getStringLast(string = \"\", separator = \" \") {\n  if (!string) return \"\";\n  const ls = string.split(separator);\n  return ls[ls.length - 1];\n}\n\n/**\n * 根据模板和给定对象进行插值\n * - 插值语法为{key}, 通过\\\\{key}来避免插值, 如果未从obj中取到值，将其替换为 ''\n * */\nexport function interpolate(tpl: string, obj: AnyObject) {\n  return tpl.replace(/((\\\\{|{).+?})/g, (a) => {\n    if (a.startsWith(\"\\\\{\")) return a.slice(1);\n    return obj[a.slice(1, -1)] || \"\";\n  });\n}\n"],"names":["replaceHtmlTags","str","val","reg","replace","createRandString","number","Array","from","length","reduce","prev","Math","random","toString","slice","KB","MB","GB","TB","byte2textDefaultConfig","precision","byte2text","byte","conf","cf","s","toFixed","heightLightMatchStringDefaultConf","color","heightLightMatchString","regExp","RegExp","getStringFirst","string","separator","split","getStringLast","ls","interpolate","tpl","obj","a","startsWith"],"mappings":"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"}