{"version":3,"sources":["/Users/lixianjie/project/openSource/m78/packages/hooks/src/utils/utils.ts"],"sourcesContent":["import { isArray, isDom } from \"@m78/utils\";\nimport { RefObject } from \"react\";\n\n/** 用于获取dom的target */\nexport type DomTarget = HTMLElement | RefObject<HTMLElement>;\n\n/**\n * 依次从target、target.current、ref.current取值，只要有任意一个为dom元素则返回\n * 传入dom时原样返回，传入包含dom对象的ref时返回current，否则返回undefined\n * */\nexport function getRefDomOrDom<H = HTMLElement>(\n  target?: any,\n  ref?: RefObject<any>\n): H | undefined {\n  if (isDom(target)) return target as unknown as H;\n  if (target && isDom(target.current)) return target.current as H;\n  if (ref && isDom(ref.current)) return ref.current as unknown as H;\n  return undefined;\n}\n\n/** 增强的getRefDomOrDom, 可以从一组target或单个target中获取dom */\nexport function getTargetDomList<H = HTMLElement>(\n  target?: DomTarget | DomTarget[],\n  ref?: RefObject<any>\n): H[] | undefined {\n  if (target) {\n    const targetList: DomTarget[] = isArray(target) ? target : [target];\n\n    const ls = targetList\n      .map((item) => getRefDomOrDom<H>(item))\n      .filter((item) => !!item) as H[];\n\n    if (ls.length) return ls;\n  }\n\n  const dom = getRefDomOrDom<H>(ref);\n\n  if (dom) return [dom];\n}\n"],"names":["isArray","isDom","getRefDomOrDom","target","ref","current","undefined","getTargetDomList","targetList","ls","map","item","filter","length","dom"],"mappings":"AAAA,SAASA,OAAO,EAAEC,KAAK,QAAQ,YAAY,CAAC;AAM5C;;;GAGG,GACH,OAAO,SAASC,cAAc,CAC5BC,MAAY,EACZC,GAAoB,EACL;IACf,IAAIH,KAAK,CAACE,MAAM,CAAC,EAAE,OAAOA,MAAM,CAAiB;IACjD,IAAIA,MAAM,IAAIF,KAAK,CAACE,MAAM,CAACE,OAAO,CAAC,EAAE,OAAOF,MAAM,CAACE,OAAO,CAAM;IAChE,IAAID,GAAG,IAAIH,KAAK,CAACG,GAAG,CAACC,OAAO,CAAC,EAAE,OAAOD,GAAG,CAACC,OAAO,CAAiB;IAClE,OAAOC,SAAS,CAAC;AACnB,CAAC;AAED,kDAAkD,GAClD,OAAO,SAASC,gBAAgB,CAC9BJ,MAAgC,EAChCC,GAAoB,EACH;IACjB,IAAID,MAAM,EAAE;QACV,IAAMK,UAAU,GAAgBR,OAAO,CAACG,MAAM,CAAC,GAAGA,MAAM,GAAG;YAACA,MAAM;SAAC,AAAC;QAEpE,IAAMM,EAAE,GAAGD,UAAU,CAClBE,GAAG,CAAC,SAACC,IAAI;mBAAKT,cAAc,CAAIS,IAAI,CAAC;SAAA,CAAC,CACtCC,MAAM,CAAC,SAACD,IAAI;mBAAK,CAAC,CAACA,IAAI;SAAA,CAAC,AAAO,AAAC;QAEnC,IAAIF,EAAE,CAACI,MAAM,EAAE,OAAOJ,EAAE,CAAC;IAC3B,CAAC;IAED,IAAMK,GAAG,GAAGZ,cAAc,CAAIE,GAAG,CAAC,AAAC;IAEnC,IAAIU,GAAG,EAAE,OAAO;QAACA,GAAG;KAAC,CAAC;AACxB,CAAC"}